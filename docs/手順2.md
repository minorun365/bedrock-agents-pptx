# Amplify Vite React テンプレートからの変更手順

[amplify-vite-react-template](https://github.com/aws-samples/amplify-vite-react-template) をクローンした後、以下の手順でBedrock Agentチャットアプリに変更します。

## 1. 依存パッケージの追加

```bash
npm install @aws-sdk/client-bedrock-agent-runtime
```

## 2. 環境変数ファイルの作成

`.env` ファイルをプロジェクトルートに作成：

```env
VITE_AGENT_ID=your-agent-id
VITE_AGENT_ALIAS_ID=your-agent-alias-id
VITE_AWS_REGION=us-east-1
```

## 3. amplify/backend.ts の変更

Cognito認証ユーザーにBedrock Agent呼び出し権限を付与するため、以下を追加：

```typescript
import { PolicyStatement, Effect } from 'aws-cdk-lib/aws-iam';

// ファイル末尾に追加
backend.auth.resources.authenticatedUserIamRole.addToPrincipalPolicy(
  new PolicyStatement({
    effect: Effect.ALLOW,
    actions: ['bedrock:InvokeAgent'],
    resources: ['arn:aws:bedrock:us-east-1:*:agent-alias/*/*'],
  })
);
```

## 4. src/main.tsx の変更

Amplify UI の日本語化設定を追加：

```typescript
// インポートを追加
import { I18n } from 'aws-amplify/utils'
import { translations } from '@aws-amplify/ui-react'

// Amplify.configure(outputs) の後に追加
I18n.putVocabularies(translations)
I18n.setLanguage('ja')
```

## 5. src/index.css の置き換え

リポジトリの `src/index.css` で置き換え

## 6. src/App.css の置き換え

リポジトリの `src/App.css` で置き換え

## 7. src/App.tsx の置き換え

リポジトリの `src/App.tsx` で置き換え